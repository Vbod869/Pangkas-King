<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pangkas Rambut King</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <style>
       
    </style>
</head>

<body>
    <!-- Overlay for Closed Notification -->
    <div id="overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 1000;">
        <div id="closed-message" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white; padding: 20px;">
            Maaf, kami tutup. Jam buka kami adalah dari 09:00 hingga 21:00.
        </div>
    </div>
    
    <!-- Header Section -->
    <header>
        <nav>
            <ul>
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#booking">Booking</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content Section -->
    <main>
        <!-- Hero Section -->
        <section id="home">
            <h1>Selamat Datang Di Pangkas Rambut King</h1>
            <p>Pesan janji temu Anda sekarang dan dapatkan potongan rambut terbaik di kota!</p>
            <button>Ngantri? Mending Booking Sekarang!</button>
        </section>

        <!-- About Section -->
        <section id="about">
            <h2>Information</h2>
            <p>Kami adalah tim tukang cukur profesional yang berdedikasi untuk memberikan pengalaman potong rambut terbaik.</p>
            <p><i class="fas fa-map-marker-alt"></i> Jl. Raya Cidadap, Kecamatan Simpenan, Kabupaten Sukabumi</p>
            <p><i class="fas fa-calendar-alt"></i> <strong> :</strong> Senin - Minggu</p>
            <p><i class="fas fa-clock"></i> <strong> :</strong> 09:00 - 21:00</p>
            <p><i class="fas fa-times-circle"></i> <strong> :</strong> 21:00 - 09:00</p>
        </section>

        <!-- Services Section -->
        <section id="services">
            <h2>Our Services</h2>
            <div class="running-text-container">
                <div class="running-text">
                    <ul>
                        <li>Haircut</li>
                        <li>Shaving</li>
                        <li>Two Block</li>
                        <li>Churtain</li>
                        <li>Comma Hair</li>
                        <li>Beard Styling</li>
                        <li>Buzz Cut</li>
                        <li>Undercut</li>
                        <li>French Crop</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact">
            <h2>Hubungi Kami</h2>
            <form>
                <input type="text" placeholder="Name" required />
                <input type="email" placeholder="Email" required />
                <textarea placeholder="Message" required></textarea>
                <button type="submit">Send</button>
            </form>
        </section>

        <!-- Reviews Section -->
        <section id="reviews">
            <h2>Ulasan Pelanggan</h2>
            <div class="review-container">
                <div class="review">
                    <div class="review-header">
                        <span class="user-name">Khalif</span>
                        <div class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                    </div>
                    <p>Hasil Cukuran nya Rapih rekomend banget deh...</p>
                </div>
                <div class="review">
                    <div class="review-header">
                        <span class="user-name">Akmal</span>
                        <div class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                    <p>Rekomend banget cukur di sini harga pelajar.</p>
                </div>
            </div>
            <div id="total-stars">Total Stars: 0</div>

            <!-- Review Submission Form -->
            <div class="review-form">
                <h3>Tambahkan Ulasan Anda</h3>
                <input type="text" id="reviewer-name" placeholder="Nama Anda" required />
                <textarea id="review-text" placeholder="Tulis ulasan..." required></textarea>
                <div class="rating">
                    <label>Rating:</label>
                    <div class="custom-select">
                        <div class="selected" id="selected-rating">Pilih Rating</div>
                        <div class="options" id="rating-options">
                            <div class="option" data-value="5">⭐️⭐️⭐️⭐️⭐️</div>
                            <div class="option" data-value="4">⭐️⭐️⭐️⭐️</div>
                            <div class="option" data-value="3">⭐️⭐️⭐️</div>
                            <div class="option" data-value="2">⭐️⭐️</div>
                            <div class="option" data-value="1">⭐️</div>
                        </div>
                    </div>
                    <input type="hidden" id="review-rating" required /> <!-- Hidden input to store the selected value -->
                </div>
                <button id="submit-review">Kirim Ulasan</button>
            </div>
        </section>
        
        <!-- Booking Section -->
        <section id="booking">
            <h2>Booking Sekarang</h2>
            <form>
                <input type="date" placeholder="Date" required />
                <input type="time" placeholder="Time" required />
                <select required>
                    <option value="" disabled selected>Pilih Gaya Cukur</option>
                    <option>Haircut</option>
                    <option>Shaving</option>
                    <option>Churtain</option>
                    <option>Buzz Cut</option>
                    <option>Undercut</option>
                    <option>Two Block</option>
                    <option>French Crop</option>
                    <option>Comma Hair</option>
                    <option>Beard Styling</option>
                    <option value="Lainnya">Lainnya (sebutkan di chat)</option>
                </select>
                <button type="submit">Booking Sekarang</button>
            </form>
        </section>
    </main>

    <!-- Footer Section -->
    <footer>
        <p>&copy; 2024 Pangkas Rambut King</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
  // Smooth Scroll for Navigation Links
  const navLinks = document.querySelectorAll('nav a');
  navLinks.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const targetId = e.target.getAttribute('href').substring(1);
      document.getElementById(targetId).scrollIntoView({
        behavior: 'smooth'
      });
    });
  });

  // Form Validation for Contact and Booking Forms
  const contactForm = document.querySelector('#contact form');
  const bookingForm = document.querySelector('#booking form');

  contactForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const name = contactForm.querySelector('input[type="text"]').value.trim();
    const email = contactForm.querySelector('input[type="email"]').value.trim();
    const message = contactForm.querySelector('textarea').value.trim();

    if (!name || !email || !message) {
      alert('Please fill in all fields.');
      return;
    }

    // Create WhatsApp message
    const whatsappMessage = `Name: ${name}%0AEmail: ${email}%0AMessage: ${message}`;
    const whatsappLink = `https://wa.me/+6282258706323?text=${whatsappMessage}`;
    window.open(whatsappLink, '_blank');

    alert('Your message has been sent to WhatsApp!');
    contactForm.reset();
  });

  bookingForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const date = bookingForm.querySelector('input[type="date"]').value;
    const time = bookingForm.querySelector('input[type="time"]').value;
    const service = bookingForm.querySelector('select').value;

    if (!date || !time || !service) {
      alert('Please complete all fields.');
      return;
    }

    const appointmentTime = new Date(`${date}T${time}`);
    scheduleNotification(appointmentTime);

    // Create WhatsApp booking message
    const bookingMessage = `Booking Details:%0ATanggal: ${date}%0AJam: ${time}%0AStyle: ${service}`;
    const bookingLink = `https://wa.me/+6282258706323?text=${bookingMessage}`;
    window.open(bookingLink, '_blank');

    alert('Your appointment has been booked and sent to WhatsApp!');
    bookingForm.reset();
  });

  // Simple Chat Functionality
  const chatInput = document.querySelector('#chat .chat-footer input');
const chatButton = document.querySelector('#chat .chat-footer button');
const chatBody = document.querySelector('#chat .chat-body ul');

// Function to get the current time
function getCurrentTime() {
  const now = new Date();
  return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
}

// Function to add a message to the chat
function addMessage(author, message) {
  const li = document.createElement('li');
  li.innerHTML = `<span>${author} (${getCurrentTime()}):</span> <p>${message}</p>`;
  chatBody.appendChild(li);
  chatBody.scrollTop = chatBody.scrollHeight; // Auto-scroll to latest message
}

// Event listener for sending message
chatButton.addEventListener('click', () => {
  const message = chatInput.value.trim();
  if (message) {
    addMessage('You', message);
    chatInput.value = '';
  }
});

// Allow sending message with Enter key
chatInput.addEventListener('keydown', (event) => {
  if (event.key === 'Enter') {
    chatButton.click(); // Trigger the click event of the button
    event.preventDefault(); // Prevent the default behavior (like a new line)
  }
});


  // Schedule Notification for Booking
  function scheduleNotification(appointmentTime) {
    const now = new Date();
    const timeDiff = appointmentTime - now;
    
    // Set reminder to 10 minutes before the appointment
    const reminderTime = timeDiff - (10 * 60 * 1000); // 10 minutes

    if (reminderTime > 0) {
      setTimeout(() => {
        alert('Your appointment is coming up in 10 minutes!');
      }, reminderTime);
    } else {
      alert('The appointment time is already passed or too close to schedule a reminder.');
    }
  }
});

let editingIndex = null; // Variable to track the index of the review being edited

// Function to create review element
function createReviewElement(reviewerName, reviewText, reviewRating, hasBeenEdited, index) {
    const newReview = document.createElement('div');
    newReview.classList.add('review');

    // Create review header
    const reviewHeader = document.createElement('div');
    reviewHeader.classList.add('review-header');

    const userNameElement = document.createElement('span');
    userNameElement.classList.add('user-name');
    userNameElement.textContent = reviewerName;

    const starsElement = document.createElement('div');
    starsElement.classList.add('stars');
    for (let i = 0; i < reviewRating; i++) {
        starsElement.innerHTML += '<i class="fas fa-star"></i>';
    }

    reviewHeader.appendChild(userNameElement);
    reviewHeader.appendChild(starsElement);

    // Create review text paragraph
    const reviewParagraph = document.createElement('p');
    reviewParagraph.textContent = reviewText;

    // Create a button container
    const buttonContainer = document.createElement('div');
    buttonContainer.classList.add('button-container');

    // Create edit button only if the review has not been edited yet
    if (!hasBeenEdited) {
        const editButton = document.createElement('button');
        editButton.classList.add('edit-review');
        editButton.textContent = 'Edit';
        editButton.setAttribute('data-index', index); // Set index for editing
        editButton.addEventListener('click', () => editReview(index));
        buttonContainer.appendChild(editButton); // Append edit button to the button container
    }

    // Append header, text, and button container to the new review
    newReview.appendChild(reviewHeader);
    newReview.appendChild(reviewParagraph);
    newReview.appendChild(buttonContainer);

    return newReview;
}

// Function to handle the editing of a review
function editReview(index) {
    const reviews = JSON.parse(localStorage.getItem('reviews')) || [];
    const reviewToEdit = reviews[index];

    // Populate form fields with the review data
    document.getElementById('reviewer-name').value = reviewToEdit.reviewerName;
    document.getElementById('review-text').value = reviewToEdit.reviewText;
    document.getElementById('review-rating').value = reviewToEdit.reviewRating;
    document.getElementById('selected-rating').textContent = '⭐️'.repeat(reviewToEdit.reviewRating) + '⭐️'.repeat(5 - reviewToEdit.reviewRating);

    // Change button text to "Update"
    const submitButton = document.getElementById('submit-review');
    submitButton.textContent = 'Perbarui Ulasan';

    // Set the editing index
    editingIndex = index;
}

// Function to show notifications
function showNotification(message) {
    const notification = document.createElement('div');
    notification.classList.add('notification');
    notification.textContent = message;
    document.body.appendChild(notification);

    // Remove notification after 3 seconds
    setTimeout(() => {
        notification.remove();
    }, 3000);
}

// Function to submit or update a review
document.getElementById('submit-review').addEventListener('click', function() {
    const reviewerName = document.getElementById('reviewer-name').value;
    const reviewText = document.getElementById('review-text').value;
    const reviewRating = document.getElementById('review-rating').value;

    if (reviewerName && reviewText && reviewRating) {
        const reviewContainer = document.querySelector('.review-container');

        if (editingIndex !== null) {
            // Update existing review
            const reviews = JSON.parse(localStorage.getItem('reviews')) || [];
            reviews[editingIndex] = { 
                reviewerName, 
                reviewText, 
                reviewRating, 
                hasBeenEdited: true // Set edited flag to true
            };
            localStorage.setItem('reviews', JSON.stringify(reviews));
            editingIndex = null; // Reset editing index
            document.getElementById('submit-review').textContent = 'Kirim Ulasan'; // Reset button text
            showNotification('Ulasan berhasil diperbarui!'); // Show success notification
        } else {
            // Create a new review element
            const newReview = createReviewElement(reviewerName, reviewText, reviewRating, false, reviewContainer.children.length);
            reviewContainer.appendChild(newReview);

            // Save the review to Local Storage
            saveReviewToLocalStorage(reviewerName, reviewText, reviewRating);
            showNotification('Ulasan berhasil dikirim!'); // Show success notification
        }

        // Clear the input fields
        document.getElementById('reviewer-name').value = '';
        document.getElementById('review-text').value = '';
        document.getElementById('review-rating').value = '';
        document.getElementById('selected-rating').textContent = 'Pilih Rating';
        
        // Reload reviews to display the updated list
        loadReviewsFromLocalStorage();
    } else {
        alert('Silakan lengkapi semua kolom!');
    }
});

// Function to save review to Local Storage
function saveReviewToLocalStorage(reviewerName, reviewText, reviewRating) {
    const reviews = JSON.parse(localStorage.getItem('reviews')) || [];
    reviews.push({ 
        reviewerName, 
        reviewText, 
        reviewRating, 
        hasBeenEdited: false // Initial value for new reviews
    });
    localStorage.setItem('reviews', JSON.stringify(reviews));
}

// Function to load reviews from Local Storage
function loadReviewsFromLocalStorage() {
    const reviews = JSON.parse(localStorage.getItem('reviews')) || [];
    const reviewContainer = document.querySelector('.review-container');
    reviewContainer.innerHTML = ''; // Clear existing reviews
    reviews.forEach((review, index) => {
        const reviewElement = createReviewElement(review.reviewerName, review.reviewText, review.reviewRating, review.hasBeenEdited, index);
        reviewContainer.appendChild(reviewElement);
    });
}

// Load reviews when the page is loaded
window.onload = loadReviewsFromLocalStorage;

// Custom Dropdown Functionality (remains the same)
const customSelect = document.querySelector('.custom-select');
const selectedRating = document.getElementById('selected-rating');
const ratingOptions = document.getElementById('rating-options');
const reviewRatingInput = document.getElementById('review-rating');

// Toggle options display
customSelect.addEventListener('click', () => {
    ratingOptions.classList.toggle('show');
});

// Set selected rating and close options
ratingOptions.addEventListener('click', (event) => {
    if (event.target.classList.contains('option')) {
        const ratingValue = event.target.getAttribute('data-value');
        selectedRating.textContent = event.target.textContent; // Show selected rating
        reviewRatingInput.value = ratingValue; // Set hidden input value
        ratingOptions.classList.remove('show'); // Hide options
    }
});

// Close options when clicking outside
document.addEventListener('click', (event) => {
    if (!customSelect.contains(event.target)) {
        ratingOptions.classList.remove('show');
    }
});

// Function to calculate total stars
function calculateTotalStars() {
  const reviews = JSON.parse(localStorage.getItem('reviews')) || [];
  let totalStars = 0;
  
  reviews.forEach(review => {
      totalStars += Number(review.reviewRating); // Add the star rating of each review
  });
  
  return totalStars; // Return the total stars
}

// Function to load reviews from Local Storage
function loadReviewsFromLocalStorage() {
  const reviews = JSON.parse(localStorage.getItem('reviews')) || [];
  const reviewContainer = document.querySelector('.review-container');
  reviewContainer.innerHTML = ''; // Clear existing reviews

  let totalStars = 0; // Initialize total stars

  reviews.forEach((review, index) => {
      const reviewElement = createReviewElement(review.reviewerName, review.reviewText, review.reviewRating, review.hasBeenEdited, index);
      reviewContainer.appendChild(reviewElement);
      totalStars += Number(review.reviewRating); // Sum the stars
  });

  // Update the total stars display
  document.getElementById('total-stars').textContent = `Total Stars: ${totalStars}`;
}

function checkOpeningHours() {
        const overlay = document.getElementById('overlay');
        const now = new Date();
        const hours = now.getHours();
        const minutes = now.getMinutes();

        // Convert the current time to minutes since midnight
        const currentTimeInMinutes = hours * 60 + minutes;

        // Define the opening and closing times in minutes since midnight
        const openingTimeInMinutes = 9 * 60; // 09:00
        const closingTimeInMinutes = 13 * 60; // 21:00

        // Check if the current time is outside of opening hours
        if (currentTimeInMinutes < openingTimeInMinutes || currentTimeInMinutes >= closingTimeInMinutes) {
            overlay.style.display = 'block'; // Show the overlay
        } else {
            overlay.style.display = 'none'; // Hide the overlay
        }
    }

    // Initial check on page load
    checkOpeningHours();

    // Set interval to check every minute (60000 ms)
    setInterval(checkOpeningHours, 60000);
    </script>
</body>
</html>
